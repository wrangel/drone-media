<!doctype html>
<html>
	<head>
		<!-- for optimal display on high DPI devices -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.min.css" />
		<link rel="stylesheet" href="css/pano-viewer.css">
		<link rel="icon" type="image/x-icon" href="media/icons/favicon/favicon.ico">
		
		<script src="https://cdn.jsdelivr.net/npm/three/build/three.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.min.js"></script>
	</head>
	
	<body>
		<div class="outer-box">
			<!-- the viewer container must have a defined size -->
			<div id="viewer"></div>
		</div>

		<script>
			const img = window.location.search.split('=')[1];
			
			const viewer = new PhotoSphereViewer.Viewer({
				container: document.querySelector('#viewer'),
				panorama: '../media/pano/' + img + '.jpeg',
				maxFov: 110, // 90, zoom out
				minFov: 10, // 30, zoom in
				defaultZoomLvl: 50,
				navbar: [
					'zoom',
					'fullscreen',
					{ // create custom button for fisheye
					id: 'fisheye',
					content: 'F',
					title: 'Fisheye View',
					className: 'fisheye-button',
					onClick: (viewer) => {
						viewer.setOptions({
							fisheye: true,
							maxFov: 150,
							});
						},
					},
					{ // create custom button for panorama
					id: 'panorama',
					content: 'P',
					title: 'Panorama View',
					className: 'panorama-button',
					onClick: (viewer) => {
						viewer.setOptions({
							fisheye: false,
							});
						},
					},
				],
			});
			

			
			// Clean up cache
			window.addEventListener('beforeunload', function () {
            	viewer.destroy();
        	});	
			
		</script>
	</body>
</html>
